\ProvidesPackage{common/basic_packages}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%    General 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{etoolbox}
\usepackage{xspace}
\xspaceaddexceptions{-}
\xspaceaddexceptions{$\times$}

\ifthesis
    \usepackage[acronym]{glossaries}
    % This is also required in order to genarate Acronyms list
    \makeglossaries
\else
    \usepackage{glossaries}
\fi
\usepackage{comment}
\usepackage{color}
\usepackage{tikz}

\ifmicro
    \usepackage[hyphens]{url}
    % Always include hyperref last
    \usepackage[bookmarks=true,breaklinks=true,letterpaper=true,colorlinks,citecolor=blue,linkcolor=blue,urlcolor=blue]{hyperref}
\else 
    \ifacmjournal
        % Do nothing
    \else
        \usepackage[hidelinks]{hyperref}
    \fi
\fi

% Enable Copy-Pasting for Reply to reviewers
\usepackage{clipboard}

% Lets me copy a tagged section from an external file
\usepackage{catchfilebetweentags}

% Enable loren ipsum text
\usepackage{lipsum}


% Insert external pdf pages
\usepackage[final]{pdfpages}

% To enable Hebrew
%\usepackage[utf8]{inputenc}








%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%  Figures
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{graphicx}        % standard LaTeX graphics tool
                             % when including figure files
\graphicspath{{./Figures/}}
\usepackage{subfigure}
%\usepackage{wrapfig} % Wraps text round images
%\usepackage[font={scriptsize}]{caption}
%\usepackage[font=normal]{caption}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%  Spacing and Margins
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Provide things like 1.5 line spacing
\usepackage{setspace}

% Spacing around Title/Authors:
% -----------------------------
% For IEEETran documents:
%   To reduce spacing after title block (below authors):
%      \IEEEoverridecommandlockouts
%      \IEEEaftertitletext{\vspace{-10px}}

% Spacing around Section Headers (Section, Subsection):
% -----------------------------------------------------
\usepackage{titlesec}
%%%%% USAGE:  
%%%%%   \titlespacing{command}{left spacing}{before spacing}{after spacing}[right]
%%%%%      the spacing is written {Xpt plus Ypt minus Zpt} 
%%%%%      where X is the spacing we want, 
%%%%%      Y is how much extra we’ll let LaTeX add and Z is how much less we’ll let it go.
% \titlespacing\section{0pt}{3pt plus 3pt minus 1pt}{3pt plus 3pt minus 1pt}
% \titlespacing\subsection{0pt}{3pt plus 3pt minus 1pt}{3pt plus 3pt minus 1pt}
% \titlespacing\subsubsection{0pt}{3pt plus 3pt minus 1pt}{3pt plus 3pt minus 1pt}

% Spacing around Figure Captions (Section, Subsection):
% -----------------------------------------------------
% The CAPTION package screws up some IEEETran defaults, so better use the built in lengths:
%   % space left between floats
%      \setlength{\floatsep}{3pt}
%   % space between last top float or first bottom float and the text
%      \setlength{\textfloatsep}{3pt}
%   % space above caption
%      \setlength{\abovecaptionskip}{-3pt plus 3pt minus 2pt}
%   % space below caption
%      \setlength{\belowcaptionskip}{0pt}
%   % Change Subfigure vertical spacing around subcaptions
%      \setlength{\subfigtopskip}{0pt}
%      \setlength{\subfigcapskip}{-2pt}
%      \setlength{\subfigbottomskip}{2pt}

% Alternatively use the CAPTION package, which has many more options, but can change unwanted things
% \usepackage{caption}
	% Change spacing between captions and figure
    %	\captionsetup{skip=2pt}
	%   \captionsetup{belowskip=-15pt}
	%   \captionsetup{aboveskip=2pt}
    % Change caption Font
	%   \captionsetup{font={small,it}}


%\usepackage{sectsty}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%  Bibliography
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\ifacmjournal
    % Do Nothing
\else 
    \ifmicro
        \usepackage[sort,nocompress]{cite}
    \else
        \usepackage{cite}
    \fi
\fi 

%\patchcmd{\thebibliography}{\section*{\refname}}{}{}{}
\let\OLDthebibliography\thebibliography
\renewcommand\thebibliography[1]{
	\OLDthebibliography{#1}
	\setlength{\parskip}{0pt}
	\setlength{\itemsep}{0pt}
}
\def\BibTeX{{\rm B\kern-.05em{\sc i\kern-.025em b}\kern-.08em
    T\kern-.1667em\lower.7ex\hbox{E}\kern-.125emX}}
    
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Math and symbols
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\ifacmjournal   %smasymb and amsfont cause a clash with the acmart class...
    % Do Nothing
\else
    \usepackage{amsmath,amssymb,latexsym}
    \usepackage{amsfonts}
\fi
\usepackage{upgreek}
\usepackage{mathtools}
\usepackage{nicefrac}
%\usepackage[detect-weight=true, binary-units=true]{siunitx} % This generates errors in IEEE Access template
\usepackage{siunitx}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Tables
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{adjustbox}
\usepackage{multirow}
\usepackage{array}
   % This defines "P" for centering a sized column
   \newcolumntype{P}[1]{>{\centering\arraybackslash}p{#1}}
% this adds some spacing between table rows
%\renewcommand{\arraystretch}{1.2} 


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Algorithms
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{algorithm}
\usepackage{algorithmicx}
%\usepackage{algcompatible}
%\usepackage[noend]{algpseudocode}

% For formatting code
\usepackage{minted}
\setminted[python]{breaklines, framesep=2mm, fontsize=\footnotesize, numbersep=5pt}
\setminted[matlab]{breaklines, framesep=2mm, fontsize=\footnotesize, numbersep=5pt}

\usepackage{listings}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Specific for Research Proposal
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\ifproposal
    \usepackage{geometry}
    \geometry{
         a4paper,
         total={170mm,257mm},
         left=25mm,
         right=25mm,
         top=25mm,
     }
    % Set 1.5 line spacing
    \onehalfspacing
\fi

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Specific for ISF Proposal
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\ifisf
    \usepackage[lmargin=2.0cm, rmargin=2.0cm,tmargin=2.0cm,bmargin=2.0cm]{geometry}
    \usepackage{fancyhdr}
    \pagestyle{fancy}
    \fancyhf{}
    \pagenumbering{gobble} % Remove page numbering
    
    %      Some Space Saving Stuff           %
    %----------------------------------------%
    % Remove/change the spaces in the itemize
    \usepackage{enumitem}
    %\setlist{nolistsep}
    \setlist[1]{itemsep=-3pt,topsep=3pt}
    % Change spacing around equations
    %\setlength{\abovedisplayskip}{-10pt}
    %\setlength{\belowdisplayskip}{-10pt}
        % Make bold text narrower (by default, it's very wide)
    %\renewcommand\bfdefault{b}% rather than bx
    \usepackage[font=normal]{caption}
    \onehalfspacing
\fi


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Specific for Thesis
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\ifthesis
    \usepackage[inner=2.5cm,outer=2.5cm,bottom=2.5cm]{geometry}
    % Set 1.5 line spacing
    \onehalfspacing

        \WarningFilter{latex}{Command \underbar has changed.}
        \WarningFilter{latex}{Command \underline has changed.}
    \usepackage{sectsty}
        

    \usepackage{fancyhdr}
    \setlength{\headheight}{15pt}
    \usepackage[fit, breakall]{truncate}
    \fancyhf{}
    \renewcommand{\headrulewidth}{0pt} % prevents header underline
    \fancyhead[LE, LO]{\scriptsize \truncate{0.47 \textwidth} \leftmark}
    \fancyhead[RE, RO]{\scriptsize \truncate{0.47 \textwidth} \rightmark}
    \fancyfoot[C]{\thepage}
    \usepackage[T1]{fontenc}

    % For fontsize options see see https://latex-tutorial.com/changing-font-size/
    \chapternumberfont{\LARGE} 
    \chaptertitlefont{\LARGE}  
\fi

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Specific for Micro
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\ifmicro
    \usepackage{mathptmx} % This is Times font
    \usepackage{fancyhdr}
    \usepackage[normalem]{ulem}
    \usepackage[final]{microtype}
    \usepackage[keeplastbox]{Templates/ExtraPackages/flushend}
    
    % Ensure letter paper
    \pdfpagewidth=8.5in
    \pdfpageheight=11in
    \pagenumbering{arabic}
\fi
