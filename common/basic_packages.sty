\ProvidesPackage{common/basic_packages}

\usepackage{etoolbox}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%    Variables per conference/journal
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% For ACM MICRO submission, uncomment microtrue
\newif\ifmicro
    %\microtrue
    \microfalse

% For Research Proposal, uncomment proposaltrue
\newif\ifproposal
    \proposaltrue
    %\proposalfalse



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%    General 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{xspace}
\xspaceaddexceptions{-}
\xspaceaddexceptions{$\times$}
\usepackage{glossaries}
\usepackage{comment}
\usepackage{color}
\ifmicro
    \usepackage[hyphens]{url}
    % Always include hyperref last
    \usepackage[bookmarks=true,breaklinks=true,letterpaper=true,colorlinks,citecolor=blue,linkcolor=blue,urlcolor=blue]{hyperref}
\else
    \usepackage[hidelinks]{hyperref}
\fi

% Enable Copy-Pasting for Reply to reviewers
\usepackage{clipboard}

% Lets me copy a tagged section from an external file
\usepackage{catchfilebetweentags}

% Enable loren ipsum text
\usepackage{lipsum}

% Change Margins and stuff


 
%\usepackage{sectsty}
\usepackage{titlesec}

% Provide things like 1.5 line spacing
\usepackage{setspace}

\ifproposal
    \usepackage{geometry}
    \geometry{
         a4paper,
         total={170mm,257mm},
         left=25mm,
         right=25mm,
         top=25mm,
     }
    % Set 1.5 line spacing
    \onehalfspacing

\fi

% Insert external pdf pages
\usepackage[final]{pdfpages}

% To enable Hebrew
%\usepackage[utf8]{inputenc}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%  Figures
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{graphicx}        % standard LaTeX graphics tool
                             % when including figure files
\graphicspath{{./Figures/}}
\usepackage{subfigure}
%\usepackage{wrapfig} % Wraps text round images
%\usepackage[font={scriptsize}]{caption}
%\usepackage[font=normal]{caption}

% Control figure/table captions
% \usepackage{caption}
	% Change spacing between captions and figure
 %	\captionsetup{skip=1pt}
	% Change caption Font
	%\captionsetup{font={small,it}}
	
	%\captionsetup{belowskip=0pt}
	%\captionsetup{aboveskip=0pt}
\usepackage{tikz}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%  Bibliography
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\ifmicro
    \usepackage[sort,nocompress]{cite}
\else
    \usepackage{cite}
\fi 

%\patchcmd{\thebibliography}{\section*{\refname}}{}{}{}
\let\OLDthebibliography\thebibliography
\renewcommand\thebibliography[1]{
	\OLDthebibliography{#1}
	\setlength{\parskip}{0pt}
	\setlength{\itemsep}{0pt}
}
\def\BibTeX{{\rm B\kern-.05em{\sc i\kern-.025em b}\kern-.08em
    T\kern-.1667em\lower.7ex\hbox{E}\kern-.125emX}}
    
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Math and symbols
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{amsmath,amssymb,latexsym}
\usepackage{amsfonts}
\usepackage{upgreek}
\usepackage{mathtools}
\usepackage{nicefrac}
%\usepackage[detect-weight=true, binary-units=true]{siunitx} % This generates errors in IEEE Access template
\usepackage{siunitx}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Tables
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{adjustbox}
\usepackage{multirow}
\usepackage{array}
   % This defines "P" for centering a sized column
   \newcolumntype{P}[1]{>{\centering\arraybackslash}p{#1}}
% this adds some spacing between table rows
%\renewcommand{\arraystretch}{1.2} 


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Algorithms
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{algorithm}
\usepackage{algorithmicx}
%\usepackage{algcompatible}
%\usepackage[noend]{algpseudocode}

% For formatting code
\usepackage{minted}
\setminted[python]{breaklines, framesep=2mm, fontsize=\footnotesize, numbersep=5pt}
\setminted[matlab]{breaklines, framesep=2mm, fontsize=\footnotesize, numbersep=5pt}

\usepackage{listings}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Specific for Micro
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\ifmicro
    \usepackage{mathptmx} % This is Times font
    \usepackage{fancyhdr}
    \usepackage[normalem]{ulem}
    \usepackage[final]{microtype}
    \usepackage[keeplastbox]{common/flushend}
    
    % Ensure letter paper
    \pdfpagewidth=8.5in
    \pdfpageheight=11in
    \pagenumbering{arabic}
\fi
